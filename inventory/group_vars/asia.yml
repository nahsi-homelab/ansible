dc: "asia"

consul_datacenter: "asia"

base_dns: |
  resolv_conf="/etc/resolv.conf"
  name_servers="192.168.200.1"
  search_domains="node.consul service.consul cinarra.com"

consul_config_all:
  datacenter: "{{ consul_datacenter }}"
  encrypt: "{{ lookup('hashi_vault', 'secret/data/gossip:consul') }}"

  data_dir: "/var/lib/consul/"

  enable_syslog: true
  # "trace", "debug", "info", "warn", "err"
  log_level: "warn"
  syslog_facility: "LOCAL5"

  rejoin_after_leave: true

  bind_addr: "{{ main_ip }}"

  enable_local_script_checks: true

  dns_config:
    soa:
      min_ttl: 60

  server: false
  retry_join: "{{ consul_servers }}"
  retry_join_wan: "{{ consul_all_servers }}"
consul_config: "{{ consul_config_all }}"
