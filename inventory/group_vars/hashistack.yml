# consul
consul_bootstrap_config:
  server: true
  bootstrap_expect: 1

consul_config_overlay:
  ui_config:
    enabled: true

  addresses:
    http: 0.0.0.0

# vault
vault_config:
  disable_mlock: true
  ui: true

  listener:
    tcp:
      address: "0.0.0.0:8200"
      tls_disable: true

  storage:
    consul: {}

# consul-template
consul_template_config:
  log_level: "warn"

  consul:
    address: "127.0.0.1:8500"

  vault:
    address: "http://vault.service.consul:8200"
    token: "{{ __vault_token }}"
    renew_token: true

  syslog:
    enabled: true
    facility: "LOCAL5"

consul_template_sources:
  - consul/cert
  - consul/ca
  - consul/key

consul_template_templates:
  consul:
    - source: "{{ consul_template_dirs.sources.path }}/consul_cert.tpl"
      destination: "/opt/consul/certs/cert.pem"
      perms: 0640
    - source: "{{ consul_template_dirs.sources.path }}/consul_ca.tpl"
      destination: "/opt/consul/certs/ca.pem"
      perms: 0640
    - source: "{{ consul_template_dirs.sources.path }}/consul_key.tpl"
      destination: "/opt/consul/certs/key.pem"
      perms: 0640
