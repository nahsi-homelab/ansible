nomad_version: "1.1.3"

nomad_private_address: !unsafe '{{ GetPrivateInterfaces | include "network" "192.168.210.0/24" | attr "address" }}'
nomad_private_interface: !unsafe '{{ GetPrivateInterfaces | include "network" "192.168.210.0/24" | attr "name" }}'

nomad_config_all:
  region: "oikumene"
  datacenter: "asia"

  data_dir: "/var/lib/nomad"

  bind_addr: "{{ nomad_private_address }}"

  log_level: "warn"
  enable_syslog: true
  syslog_facility: "LOCAL5"

  client:
    enabled: true
    network_interface: "{{ nomad_private_interface }}"
    servers:
      - "nomad.service.syria.consul:4647"

  consul:
    address: "127.0.0.1:8500"

  plugin:
    docker:
      config:
        endpoint: "unix:///var/run/docker.sock"
        volumes:
          enabled: true

nomad_config: "{{ nomad_config_all }}"
