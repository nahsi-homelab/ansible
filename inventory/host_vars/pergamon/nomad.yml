nomad_configs:
  volumes:
    client:
      host_volume:
        - docker-socket:
            path: "/var/run/docker.sock"
        - vboxdrv:
            path: "/dev/vboxdrv"

        - postgres:
            path: "/var/lib/postgres"
        - zookeeper:
            path: "/var/lib/zookeeper"
        - kafka:
            path: "/var/lib/kafka"
        - minio:
            path: "/var/lib/minio"
        - mongo:
            path: "/var/lib/mongo"

  meta:
    client:
      meta:
        virtualbox: true

        zoo_node_id: 3
        kafka_node_id: 3
        minio_node_id: 3

        mongo_node_id: "secondary"

  # chroot:
  #   client:
  #     chroot_env:
  #       "/bin": "/bin"
  #       "/etc": "/etc"
  #       "/lib": "/lib"
  #       "/lib64": "/lib64"
  #       "/run/resolvconf": "/run/resolvconf"
  #       "/sbin": "/sbin"
  #       "/usr": "/usr"
  #       "/dev/vboxdrv": "/dev/vboxdrv"
  #       "/dev/vboxdrvu": "/dev/vboxdrvu"
  #       "/dev/vboxnetctl": "/dev/vboxctl"

nomad_config: >
  {{
    nomad_config_agent |
    combine(nomad_config_server, recursive=true)
  }}
