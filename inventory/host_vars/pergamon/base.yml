arch: "amd64"
bios: "legacy"

base_consolefont: "ter-i24b"

base_filesystems:
  - path: "/var/tmp"
    src: "tmpfs"
    opts: "rw,nosuid,noatime,nodev,size=75%,mode=1777"
    type: "tmpfs"
  - path: "/tmp"
    src: "tmpfs"
    opts: "rw,nosuid,noatime,nodev,size=2G,mode=1777"
    type: "tmpfs"

base_sshd_listen_address: 192.168.50.10

base_env:
  locale: "en_US.UTF-8"
  editor: "nvim"

base_packages:
  - net-misc/r8168
  - media-video/ffmpeg
  - x11-base/xorg-server
  - x11-wm/awesome
  - www-client/qutebrowser
  - media-video/mpv
  - x11-terms/kitty
  - x11-misc/picom

base_gentoo_mirrors:
  - https://mirror.yandex.ru/gentoo-distfiles/
  - https://distfiles.gentoo.org/

base_portage_features:
  - distcc
  - parallel-install

base_portage_use:
  - zstd
  - luajit
  - dist-kernel

  # desktop
  - elogind
  - -policykit
  - dri
  - drm
  - icu
  - xcb
  - -gtk
  - -gtk3
  - -sound

  - alsa
  - vulkan
  - vdpau
  - opengl

  - opus
  - ogg
  - vorbis
  - flac
  - gif
  - jpeg
  - png
  - webp
  - aac
  - dts

base_portage_package_use:
  - net_misc/openssh -pam
  - sys-devel/gcc pgo
  - media-libs/mesa -classic -gles2
  - media-video/ffmpeg X chromium libdrm x264 x265 webp vpx vorbis theora
  - media-video/mpv X
  - media-libs/vulkan-loader X

  # awesome
  - x11-libs/cairo X
  - x11-libs/libxkbcommon X

  # xorg-server
  - media-libs/libglvnd X
  - x11-libs/libdrm video_cards_radeon

  # qutebrowser
  - www-client/qutebrowser scripts
  - dev-python/PyQt5 declarative printsupport widgets gui network opengl sql multimedia webchannel websockets
  - dev-libs/libpcre2 pcre16
  - sys-libs/zlib minizip
  - dev-qt/qtmultimedia widgets
  - dev-qt/qtwebengine widgets
  - dev-qt/qtwebchannel qml
  - media-libs/libvpx svc

base_services:
  - name: "elogind"
    runlevel: "boot"

base_distcc_hosts: |
  192.168.1.7/16

base_portage_makeconf:
  COMMON_FLAGS: "-O2 -march=amdfam10 -mtune=amdfam10 -mcx16 -mpopcnt"
  CPU_FLAGS_X86: "3dnow 3dnowext popcnt mmx mmxext sse sse2 sse3 sse4a"
  VIDEO_CARDS: "amdgpu radeonsi"
  LUA_TARGETS: "luajit"
  LUA_SINGLE_TARGET: "luajit"
  LLVM_TARGETS: "AMDGPU X86"

base_wireguard_configs:
  syria: "{{ lookup('hashi_vault', 'secret/data/wireguard/pergamon:syria') }}"

base_wireguard_interfaces:
  - "syria"

base_network: |
  config_enp2s0="192.168.50.10/24"
  routes_enp2s0="default via 192.168.50.1"

base_network_interfaces:
  - "enp2s0"
