telegraf_configs_servers:
  docker: |
    [[inputs.docker]]
      endpoint = "unix:///var/run/docker.sock"
      gather_services = false
      source_tag = false
      perdevice = false
      total = true
      total_include = ["cpu", "blkio", "network"]

      # docker_label_include = []
      docker_label_exclude = ["*"]

  zfs: |
    [[inputs.zfs]]
    [[inputs.execd]]
      command = ["/usr/libexec/zfs/zpool_influxdb", "--execd"]
      signal = "STDIN"
      restart_delay = "10s"
      data_format = "influx"

telegraf_configs: >
  {{
    telegraf_configs_servers |
    combine(telegraf_configs_all, recursive=true)
  }}
