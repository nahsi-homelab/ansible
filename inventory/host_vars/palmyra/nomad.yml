nomad_configs:
  volumes:
    client:
      host_volume:
        - docker-socket:
            path: "/var/run/docker.sock"
        - postgres:
            path: "/var/lib/postgres"
        - zookeeper:
            path: "/var/lib/zookeeper"
        - kafka:
            path: "/var/lib/kafka"
        - minio:
            path: "/var/lib/minio"

  meta:
    client:
      meta:
        virtualbox: true

        zoo_node_id: 2
        kafka_node_id: 2
        minio_node_id: 2

  chroot:
    client:
      chroot_env:
        "/bin": "/bin"
        "/etc": "/etc"
        "/lib": "/lib"
        "/lib64": "/lib64"
        "/run/resolvconf": "/run/resolvconf"
        "/sbin": "/sbin"
        "/usr": "/usr"
        "/dev/vboxdrv": "/dev/vboxdrv"
        "/dev/vboxdrvu": "/dev/vboxdrvu"
        "/dev/vboxnetctl": "/dev/vboxctl"

nomad_config: >
  {{
    nomad_config_agent |
    combine(nomad_config_server, recursive=true)
  }}
